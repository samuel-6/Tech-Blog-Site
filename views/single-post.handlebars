{{#extend 'layouts/main'}}

{{!-- Define the main content section --}}

{{#section 'content'}}

  <div class="container">

    <div class="row">

      <div class="col-md-8">

        <article class="post">

          <h2>{{post.title}}</h2>
          <p>Posted by {{post.creator}} on {{post.dateCreated}}</p>

          <div class="post-content">

            {{{post.contents}}} <!-- Use triple curly braces to render raw HTML -->

          </div>

        </article>

        <hr>

        <h3>Comments:</h3>

        {{#each comments}}

          <div class="comment">

            <p>{{this.creator}} on {{this.dateCreated}}</p>
            <p>{{this.content}}</p>

          </div>

        {{/each}}

        {{!-- Display comment form if user is logged in --}}
        {{#if userLoggedIn}}

          <h4>Add a Comment:</h4>
          <form action="/add-comment/{{post.id}}" method="POST">

            <div class="form-group">

              <textarea class="form-control" name="comment" rows="3" required></textarea>

            </div>

            <button type="submit" class="btn btn-primary">Submit Comment</button>

          </form>

        {{else}}

          <p><a href="/login">Log in</a> to leave a comment.</p>

        {{/if}}

      </div>

    </div>

  </div>
  
{{/section}}